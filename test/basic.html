<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>paper-slider test</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

        <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
        <script src="../../web-component-tester/browser.js"></script>
        <script src="../../iron-test-helpers/mock-interactions.js"></script>

        <link rel="import" href="../x-carousel.html">
        <style>
            .cards {
                display: flex;
                flex-direction: row;
            }
            .card {
                width: 200px;
                height: 250px;
                background: red;
                margin: 12px;
            }
            x-carousel {
                width: 800px;
            }
        </style>
    </head>
<body>

    <test-fixture id="methods">
        <template>
            <x-carousel>
                <div class="cards" slot="content">
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                    <div class="card"></div>
                </div>
            </x-carousel>
        </template>
    </test-fixture>

    <test-fixture id="trivial">
        <template>
            <x-carousel>
                <button type="button" slot="left-button" carousel-control-left>&lt;</button>
                    <div class="cards" slot="content">
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                        <div class="card"></div>
                    </div>
                    <button type="button" slot="right-button" carousel-control-right>&gt;</button>
            </x-carousel>
        </template>
    </test-fixture>

    <script>
        suite('<x-carousel>', function() {
            var carousel;
            setup(function() {
                carousel = fixture('trivial');
            });
            test('move', function() {
                var startOffset = carousel.offset,
                    updatedOffset;
                carousel.moveRight();
                updatedOffset = carousel.offset;
                assert.isTrue(startOffset > updatedOffset, 'Moving right doesn\'t increment negative offset');
                carousel.moveLeft();
                updatedOffset = carousel.offset;
                assert.isTrue(startOffset === updatedOffset, 'Moving right and then left doesn\'t result in original offset');
            });
            test('buttons', function() {
                var leftButton = carousel.querySelector('[carousel-control-left]'),
                    rightButton = carousel.querySelector('[carousel-control-right]'),
                    startOffset = carousel.offset,
                    updatedOffset;

                MockInteractions.tap(rightButton);
                updatedOffset = carousel.offset;
                assert.isTrue(startOffset > updatedOffset, 'Tapping right doesn\'t increment negative offset');
                MockInteractions.tap(leftButton);
                updatedOffset = carousel.offset;
                assert.isTrue(startOffset === updatedOffset, 'Tapping right and then left doesn\'t result in original offset');
            });
        });
    </script>

</body>
</html>